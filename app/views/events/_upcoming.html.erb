<div class="column is-half">
 <h1 class="title is-1">Upcoming Events</h1>
    <% @events.each do | event |%>
      <p class="panel-heading"><%= event.name %></p>
        <div class="box">
        <article class="media">
          <div class="media-content">
            <div class="content">
              <p><strong>Host:</strong> @<%= event.creator.username %><br/> 
              <p><strong>Location:</strong> <%= event.location %></p>
              <p><strong>Date:</strong> 
                <%= event.date.strftime("%B")[0,3] %>
                <%= event.date.strftime("%d") %>,
                <%= event.date.year %></p>
            </div>
              <nav class="level">
                <div class="level-left is-mobile">
                  <p><%= link_to 'View', event %> &nbsp; &nbsp;</p>
                  <%# following gives edit, delete to creator or attend or withdraw to other user %>
                    <% if user_signed_in? %> 
                      <% if event.creator == current_user %>
                        <p><%= link_to 'Edit', edit_event_path(event) %>&nbsp; &nbsp;</p>
                        <%= link_to 'Delete', event_path(event),
                            class: 'button',
                            data: 
                                  {
                                    turbo_method: :delete,
                                    turbo_confirm: "Click OK to confirm deleting this event."
                                  } %>
                      <% elsif %>
                        <% !current_user.attended_event_ids.include?(event.id) %>
                        
                            <%= link_to 'Attend', event_create_attendings_path(event.id), 
                                data: { turbo_method: "post" }, class: 'button' %>
                      <% else %>
                          <%= link_to 'Withdraw', event_destroy_attendings_path(event.id), 
                              data: { turbo_method: "delete" }, class: 'button' %>
                      <% end %>
                    <% end %>
                </div>
              </nav>
          </div>
        </article>
        </div>
  <% end %>
</div>